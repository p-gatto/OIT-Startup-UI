<div class="login-container">
    <mat-card class="login-card">
        <mat-card-header>
            <mat-card-title class="login-title">
                <mat-icon class="login-icon">account_circle</mat-icon>
                Accesso OIT Startup
            </mat-card-title>
            <mat-card-subtitle>Inserisci le tue credenziali per accedere</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Username</mat-label>
                    <input matInput formControlName="username" placeholder="Inserisci username" autocomplete="username">
                    <mat-icon matSuffix>person</mat-icon>
                    <mat-error *ngIf="loginForm.get('username')?.hasError('required')">
                        Username obbligatorio
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Password</mat-label>
                    <input matInput [type]="hidePassword() ? 'password' : 'text'" formControlName="password"
                        placeholder="Inserisci password" autocomplete="current-password">
                    <button mat-icon-button matSuffix type="button" (click)="togglePasswordVisibility()"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword()">
                        <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                    <mat-error *ngIf="loginForm.get('password')?.hasError('required')">
                        Password obbligatoria
                    </mat-error>
                </mat-form-field>

                <div class="form-options">
                    <mat-checkbox formControlName="rememberMe">
                        Ricordami
                    </mat-checkbox>
                </div>

                <div class="login-actions">
                    <button mat-raised-button color="primary" type="submit" class="login-button"
                        [disabled]="loginForm.invalid || isLoading()">
                        @if (isLoading()) {
                        <mat-spinner diameter="20" class="login-spinner"></mat-spinner>
                        Accesso in corso...
                        } @else {
                        <ng-container>
                            <mat-icon>login</mat-icon>
                            Accedi
                        </ng-container>
                        }
                    </button>
                </div>

                @if (errorMessage()) {
                <div class="error-message">
                    <mat-icon>error</mat-icon>
                    {{ errorMessage() }}
                </div>
                }
            </form>
        </mat-card-content>

        <mat-card-footer class="login-footer">
            <div class="demo-credentials">
                <h4>Credenziali Demo:</h4>
                <p><strong>Admin:</strong> admin / Admin123!</p>
                <p><strong>User:</strong> user / User123!</p>
            </div>
        </mat-card-footer>
    </mat-card>
</div>